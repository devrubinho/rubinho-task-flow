---
description: Gerenciamento autom√°tico de status de tasks durante execu√ß√£o e sugest√£o de commit ao finalizar
globs: **/*
alwaysApply: true
---

- **Gerenciamento Autom√°tico de Status de Tasks:**
  - **Antes de executar tasks**: Sempre marcar como `in-progress` antes de come√ßar
  - **Ap√≥s finalizar tasks**: Sempre marcar como `done` ao concluir
  - **Sugerir commit**: Ap√≥s marcar como done, sugerir git add e git commit com mensagem descritiva

- **Quando Aplicar:**
  - Quando o usu√°rio pedir para executar uma ou mais tasks
  - Quando o usu√°rio pedir para implementar funcionalidades relacionadas a tasks
  - Quando o usu√°rio pedir para trabalhar em tarefas espec√≠ficas

- **Processo de Execu√ß√£o:**
  1. **Identificar tasks**: Quando o usu√°rio mencionar tasks a serem executadas, identificar os IDs
  2. **Marcar como in-progress**: Antes de come√ßar, usar `set_task_status` para marcar como `in-progress`
  3. **Executar trabalho**: Implementar as tasks normalmente
  4. **Marcar como done**: Ap√≥s conclus√£o, usar `set_task_status` para marcar como `done`
  5. **Sugerir commit**: Analisar mudan√ßas e sugerir git add + git commit

- **Marca√ß√£o de Status:**
  ```bash
  # Antes de executar (sempre fazer primeiro)
  task-master set-status --id=1,2,3 --status=in-progress
  
  # Ap√≥s finalizar (sempre fazer ao concluir)
  task-master set-status --id=1,2,3 --status=done
  ```

- **Sugest√£o de Commit:**
  - **Analisar mudan√ßas**: Usar `git status` e `git diff` para identificar arquivos modificados
  - **Gerar mensagem**: Criar mensagem baseada nas tasks executadas
  - **Seguir formato**: Usar conventional commits conforme [commit_practices.mdc](mdc:.cursor/rules/commit_practices.mdc)
  - **NUNCA executar git**: Apenas sugerir, seguindo [git_control.mdc](mdc:.cursor/rules/git_control.mdc)

- **Formato da Sugest√£o de Commit:**
  ```bash
  # ‚úÖ DO: Formato recomendado
  git add .
  git commit -m "feat(module): Implement tasks X, Y, Z
  
  - Task X: Descri√ß√£o do que foi feito
  - Task Y: Descri√ß√£o do que foi feito
  - Task Z: Descri√ß√£o do que foi feito
  
  Tasks: 1, 2, 3"
  ```

- **Exemplos de Fluxo:**
  
  **Exemplo 1: Executar uma task**
  ```markdown
  Usu√°rio: "Execute a task 5"
  
  A√ß√µes do AI:
  1. task-master set-status --id=5 --status=in-progress
  2. [Implementar task 5]
  3. task-master set-status --id=5 --status=done
  4. Sugerir commit:
     ```bash
     git add .
     git commit -m "feat(module): Implement task 5 - [descri√ß√£o]
     
     - [detalhes da implementa√ß√£o]
     - Task ID: 5"
     ```
  ```
  
  **Exemplo 2: Executar m√∫ltiplas tasks**
  ```markdown
  Usu√°rio: "Execute as tasks 3, 4 e 7"
  
  A√ß√µes do AI:
  1. task-master set-status --id=3,4,7 --status=in-progress
  2. [Implementar tasks 3, 4, 7]
  3. task-master set-status --id=3,4,7 --status=done
  4. Sugerir commit:
     ```bash
     git add .
     git commit -m "feat(module): Implement tasks 3, 4, 7
     
     - Task 3: [descri√ß√£o]
     - Task 4: [descri√ß√£o]
     - Task 7: [descri√ß√£o]
     
     Tasks: 3, 4, 7"
     ```
  ```

- **Identifica√ß√£o de Tasks:**
  - Se o usu√°rio mencionar n√∫meros (ex: "task 5", "tasks 1,2,3"), usar esses IDs
  - Se o usu√°rio mencionar t√≠tulos, buscar tasks correspondentes usando `get_tasks`
  - Se n√£o houver contexto claro, perguntar ao usu√°rio quais tasks executar

- **An√°lise de Mudan√ßas para Commit:**
  - Usar `git status --short` para listar arquivos modificados
  - Usar `git diff --stat` para estat√≠sticas de mudan√ßas
  - Incluir resumo das mudan√ßas na mensagem de commit
  - Mencionar arquivos principais modificados se relevante

- **Apresenta√ß√£o da Sugest√£o:**
  ```markdown
  ‚úÖ Tasks 3, 4, 7 conclu√≠das!
  
  üìù Sugest√£o de commit:
  ```bash
  git add .
  git commit -m "feat(api): Implement authentication and user management
  
  - Task 3: Add user login endpoint
  - Task 4: Implement JWT token generation
  - Task 7: Add user registration
  
  Tasks: 3, 4, 7"
  ```
  
  üìä Mudan√ßas detectadas:
  - 5 arquivos modificados
  - 120 linhas adicionadas, 8 removidas
  ```

- **Integra√ß√£o com Outras Regras:**
  - Seguir [commit_practices.mdc](mdc:.cursor/rules/commit_practices.mdc) para formato de commit
  - Seguir [git_control.mdc](mdc:.cursor/rules/git_control.mdc) - NUNCA executar git, apenas sugerir
  - Seguir [dev_workflow.mdc](mdc:.cursor/rules/taskmaster/dev_workflow.mdc) para workflow de desenvolvimento
  - Usar ferramentas MCP do Taskmaster quando dispon√≠veis

- **Casos Especiais:**
  - **Se task j√° est√° in-progress**: N√£o precisa marcar novamente, apenas continuar
  - **Se task falhar**: Marcar como apropriado (pode deixar in-progress ou criar subtask para o problema)
  - **Se usu√°rio cancelar**: Perguntar se deve manter in-progress ou reverter para pending
  - **Se n√£o houver mudan√ßas no git**: Ainda sugerir commit, mas mencionar que n√£o h√° mudan√ßas

- **Princ√≠pio Fundamental:**
  > **Sempre gerenciar o status das tasks automaticamente. Antes de executar: in-progress. Ap√≥s concluir: done + sugest√£o de commit. Nunca executar comandos git, apenas sugerir.**
