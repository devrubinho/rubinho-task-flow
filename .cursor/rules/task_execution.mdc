---
description: Gerenciamento autom√°tico de status de tasks durante execu√ß√£o e sugest√£o de commit ao finalizar
globs: **/*
alwaysApply: true
---

- **Gerenciamento Autom√°tico de Status de Tasks:**
  - **Antes de executar tasks**: Sempre marcar como `in-progress` antes de come√ßar
  - **Ap√≥s finalizar tasks**: Sempre marcar como `done` ao concluir
  - **Sugerir commit**: Ap√≥s marcar como done, sugerir git add e git commit com mensagem descritiva

- **Quando Aplicar:**
  - Quando o usu√°rio pedir para executar uma ou mais tasks
  - Quando o usu√°rio pedir para implementar funcionalidades relacionadas a tasks
  - Quando o usu√°rio pedir para trabalhar em tarefas espec√≠ficas

- **Processo de Execu√ß√£o:**
  1. **Identificar tasks**: Quando o usu√°rio mencionar tasks a serem executadas, identificar os IDs
  2. **Marcar como in-progress**: Antes de come√ßar, usar `set_task_status` para marcar como `in-progress`
  3. **Executar trabalho**: Implementar as tasks normalmente
  4. **Marcar como done**: Ap√≥s conclus√£o, usar `set_task_status` para marcar como `done`
  5. **Sugerir commit**: Analisar mudan√ßas e sugerir git add + git commit

- **Marca√ß√£o de Status:**
  ```bash
  # Antes de executar (sempre fazer primeiro)
  ./aitask done <id>  # Marcar como in-progress manualmente se necess√°rio

  # Ap√≥s finalizar (sempre fazer ao concluir)
  ./aitask done <id>  # Marca task/subtask como done
  ```

- **Sugest√£o de Commit:**
  - **Analisar mudan√ßas**: Usar `git status` e `git diff` para identificar arquivos modificados
  - **Gerar mensagem**: Criar mensagem baseada nas tasks executadas
  - **Seguir formato**: Usar conventional commits conforme [commit_practices.mdc](mdc:.cursor/rules/commit_practices.mdc)
  - **NUNCA executar git**: Apenas sugerir, seguindo [git_control.mdc](mdc:.cursor/rules/git_control.mdc)

- **Formato da Sugest√£o de Commit:**
  ```bash
  # ‚úÖ DO: Formato recomendado
  git add .
  git commit -m "feat(module): Implement tasks X, Y, Z

  - Task X: Descri√ß√£o do que foi feito
  - Task Y: Descri√ß√£o do que foi feito
  - Task Z: Descri√ß√£o do que foi feito

  Tasks: 1, 2, 3"
  ```

- **Exemplos de Fluxo:**

  **Exemplo 1: Executar uma subtask**
  ```markdown
  Usu√°rio: "Execute a subtask 1.2"

  A√ß√µes do AI:
  1. ./aitask show 1.2  # Ver instru√ß√µes detalhadas
  2. [Implementar subtask 1.2 seguindo instru√ß√µes]
  3. ./aitask done 1.2  # Marcar como done
  4. Sugerir commit:
     ```bash
     git add .
     git commit -m "feat(module): Complete subtask 1.2 - [descri√ß√£o]

     - [detalhes da implementa√ß√£o]
     - Subtask ID: 1.2"
     ```
  ```

  **Exemplo 2: Executar m√∫ltiplas subtasks**
  ```markdown
  Usu√°rio: "Execute as subtasks 1.1, 1.2 e 1.3"

  A√ß√µes do AI:
  1. [Implementar cada subtask seguindo instru√ß√µes de ./aitask show]
  2. ./aitask done 1.1
  3. ./aitask done 1.2
  4. ./aitask done 1.3
  5. Sugerir commit:
     ```bash
     git add .
     git commit -m "feat(module): Complete subtasks 1.1, 1.2, 1.3

     - Subtask 1.1: [descri√ß√£o]
     - Subtask 1.2: [descri√ß√£o]
     - Subtask 1.3: [descri√ß√£o]

     Subtasks: 1.1, 1.2, 1.3"
     ```
  ```

- **Identifica√ß√£o de Tasks:**
  - Se o usu√°rio mencionar n√∫meros (ex: "subtask 1.2", "tasks 1.1,1.2,1.3"), usar esses IDs
  - Usar `./aitask list` para ver tasks dispon√≠veis
  - Usar `./aitask show <id>` para ver detalhes de uma task/subtask
  - Se n√£o houver contexto claro, perguntar ao usu√°rio quais tasks executar

- **An√°lise de Mudan√ßas para Commit:**
  - Usar `git status --short` para listar arquivos modificados
  - Usar `git diff --stat` para estat√≠sticas de mudan√ßas
  - Incluir resumo das mudan√ßas na mensagem de commit
  - Mencionar arquivos principais modificados se relevante

- **Apresenta√ß√£o da Sugest√£o:**
  ```markdown
  ‚úÖ Tasks 3, 4, 7 conclu√≠das!

  üìù Sugest√£o de commit:
  ```bash
  git add .
  git commit -m "feat(api): Implement authentication and user management

  - Task 3: Add user login endpoint
  - Task 4: Implement JWT token generation
  - Task 7: Add user registration

  Tasks: 3, 4, 7"
  ```

  üìä Mudan√ßas detectadas:
  - 5 arquivos modificados
  - 120 linhas adicionadas, 8 removidas
  ```

- **Integra√ß√£o com Outras Regras:**
  - Seguir [commit_practices.mdc](mdc:.cursor/rules/commit_practices.mdc) para formato de commit
  - Seguir [git_control.mdc](mdc:.cursor/rules/git_control.mdc) - NUNCA executar git, apenas sugerir
  - Usar `./aitask` para gerenciar tasks do AI Task Manager
  - Ver `AI_RULES.md` para regras de desenvolvimento com IA
  - Ver `AITASK_USAGE.md` para documenta√ß√£o completa do AI Task Manager

- **Casos Especiais:**
  - **Se task j√° est√° in-progress**: N√£o precisa marcar novamente, apenas continuar
  - **Se task falhar**: Marcar como apropriado (pode deixar in-progress ou criar subtask para o problema)
  - **Se usu√°rio cancelar**: Perguntar se deve manter in-progress ou reverter para pending
  - **Se n√£o houver mudan√ßas no git**: Ainda sugerir commit, mas mencionar que n√£o h√° mudan√ßas

- **Princ√≠pio Fundamental:**
  > **Sempre gerenciar o status das tasks automaticamente. Antes de executar: in-progress. Ap√≥s concluir: done + sugest√£o de commit. Nunca executar comandos git, apenas sugerir.**
